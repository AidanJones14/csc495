
Matlab code used to design the observer based controller is shown below:
\iftoggle{soln}{%
  \lstinputlisting{simulink/hw13/armParamHW13.m}
}{%
  \lstinputlisting{../control_book_public_solutions/_A_arm/simulink/hw13/armParamHW13.m}
}



Lines~1--53 are identical to the state feedback design from Homework~\ref{ds:single_link_arm}.\ref{chap:state-feedback-integrator} except that we are using $\omega_n$ as a tuning parameter instead of $t_r$.  This is to highlight the bandwidth separation between the controller and the observer.  The poles of the observation error are selected in Lines~55--69 in a form that allows $\omega_{n_{obs}}$ to be tuned for performance.  The observability check is in Line~64--66, and the observer gains are computed using the {\tt place} command in Line~68.  Note the transposes on this line.

Matlab code for the observer based control  is shown below:
\iftoggle{soln}{%
  \lstinputlisting{simulink/hw13/arm_ctrl.m}
}{%
  \lstinputlisting{../control_book_public_solutions/_A_arm/simulink/hw13/arm_ctrl.m}
}


The observer is implemented in Lines~6--21.  Note that the control signal on line~37 uses $\hat{x}$ instead of $x$, and that $\hat{\theta}$ is used instead of $\theta$ on lines~24 and~36.  
See \controlbookurl{http://controlbook.byu.edu} for the complete solution.

